namespace SpriteKind {
    export const coin = SpriteKind.create()
    export const gomba = SpriteKind.create()
}
controller.A.onEvent(ControllerButtonEvent.Pressed, function () {
    if (Mario.vy == 0) {
        Mario.vy = -190
    }
})
scene.onOverlapTile(SpriteKind.Player, assets.tile`tile5`, function (sprite, location) {
    game.over(true)
})
scene.onOverlapTile(SpriteKind.Player, sprites.dungeon.hazardLava1, function (sprite, location) {
    game.over(false)
})
sprites.onOverlap(SpriteKind.Player, SpriteKind.coin, function (sprite, otherSprite) {
    info.changeScoreBy(1)
    otherSprite.destroy()
})
scene.onOverlapTile(SpriteKind.Player, assets.tile`tile6`, function (sprite, location) {
    game.over(true)
})
sprites.onOverlap(SpriteKind.Player, SpriteKind.gomba, function (sprite, otherSprite) {
    otherSprite.destroy()
    koopa = sprites.create(assets.image`MarioDer`, SpriteKind.Enemy)
    animation.runImageAnimation(
    koopa,
    [img`
        . 5 7 1 1 . . . . . . . . . . . 
        . 5 7 1 1 . . . . . . 1 . . . . 
        . 5 1 1 1 . . . . . 1 1 1 . . . 
        5 5 1 1 1 . . . . 1 1 4 1 . . . 
        5 5 5 5 5 . . . 1 1 4 1 1 . . . 
        5 7 5 5 5 . . 1 1 4 1 1 1 . . . 
        5 5 5 5 5 . 1 1 1 1 1 1 1 . . . 
        5 5 5 5 5 1 1 4 7 7 1 1 1 1 . . 
        5 5 5 5 5 1 7 7 4 7 7 7 7 7 1 1 
        5 5 5 5 5 1 1 7 7 4 7 7 7 7 7 1 
        . . . . . . 1 1 7 7 4 7 7 7 7 1 
        . . . . . . 5 1 1 7 7 4 7 7 7 1 
        . . . . . . 5 5 1 1 7 7 4 7 7 1 
        . . . . . . 5 5 5 1 1 1 1 7 1 1 
        . . . . . . 5 5 5 . . . 1 1 1 5 
        . . . . . 5 5 5 5 . . . 5 5 5 5 
        `,img`
        . 5 7 1 1 . . . . . . . . . . . 
        . 5 7 1 1 . . . . . . . . . . . 
        . 5 1 1 1 . . . . . . . . . . . 
        5 5 1 1 1 . . . . . . . . . . . 
        5 5 5 5 5 . . . . . . . . . . . 
        5 7 5 5 5 . . . . . . . . . . . 
        5 5 5 5 5 . 1 1 1 1 1 1 1 . . . 
        5 5 5 5 5 1 1 4 7 7 1 1 1 1 . . 
        5 5 5 5 5 1 7 7 4 7 7 7 7 7 1 1 
        5 5 5 5 5 1 1 7 7 4 7 7 7 7 7 1 
        . . . . . . 1 1 7 7 4 7 7 7 7 1 
        . . . . . . 5 1 1 7 7 4 7 7 7 1 
        . . . . . . 5 5 1 1 7 7 4 7 7 1 
        . . . . . . 5 5 5 1 1 1 1 7 1 1 
        . . . . . . 5 5 5 . . . 1 1 1 5 
        . . . . . 5 5 5 5 . . . 5 5 5 5 
        `],
    100,
    true
    )
    koopa.setPosition(Mario.x + 80, Mario.y - 80)
    koopa.follow(Mario, 100)
    if (Mario.y == otherSprite.y) {
        info.changeLifeBy(-1)
    } else {
        info.changeScoreBy(3)
    }
})
function GenerarMapa01 () {
    scene.setBackgroundColor(9)
    scene.setBackgroundImage(img`
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ..................................ffffff..................................fffff.................................................................................
        ................................ff11111ffffff...........................fff111ff................................................................................
        ................................f111111111111f..........................f111111f................................................................................
        ........................ff....ff11111111111111f........................f1111111ff...............................................................................
        .......................ff1ff.f1111111111111111f........................f11111111f...fffffffffffff...............................................................
        ......................f1111f.f11111111111111111f......................ff11111111ffff111111111111ff..............................................................
        .....................f111111f111111111111111111f......................f11111111111111111111111111f..............................................................
        ...................fff1111111111111111111111111f......................f11111111111111111111111111f..............................................................
        ...................f.f1111111111111111111111111f......................f111111111111111111111111ff...............................................................
        ....................f111111111111111111111111fff.......................f1111111111111111111111f.................................................................
        ....................ff1111111111111111111111f..........................ff1111111111111111111ff..................................................................
        ......................f11111111111111111111f............................ff11111111111111ffff....................................................................
        ......................f1111111111111111111f..............................fffffffffffffff........................................................................
        .......................f111111111111111fff......................................................................................................................
        .......................ffffffffffffffff.........................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ...............................777777...........................................................................................................................
        ...........................77777777777..........................................................................................................................
        ......................777777777777777777......................................777...............................................................................
        ......................77777777777777777777.........................777.......77777..............................................................................
        .....................777777777777777777777........................77777.....77777777......7777..................................................................
        ....................7777777777777777ff77777.......................7777777..77777777777.777777777................................................................
        ...................7777ff7777777777fff7777777....................777777777777777777777.7777777777...............................................................
        ...................7777ff7777777777fff77777777...................777777777777777777777777777777777..............................................................
        ..................77777777777777777fff77777777...................777777777777777777777777777777777..............................................................
        ................7777777777777777777777777777777..................7777777777777777777777777777777777.............................................................
        ................7777777777777777777777777777777..................7777777777777777777777777777777777.............................................................
        `)
    tiles.setTilemap(tilemap`level1`)
    Mario = sprites.create(img`
        ........ffff......
        ......ff222ff.....
        .....f222222f.....
        ....f222ffffff....
        ...f222ffffffff...
        ...f2ffddddddff...
        ..ffffdddfdfdf....
        ..fdffdddfdfdf....
        .fddfffdddddddf...
        .fdddfddfdddddf...
        ..fddddffffddfff..
        ...ffddddfffff....
        ....fffdddddf.....
        ....ffffffff......
        ..ff22f82228f.....
        .f2222f82228f.....
        f2222f8882228ff...
        f222f888822288df..
        f22ffff8888888df..
        f2fddddf858855....
        .ffddddf858855f...
        ...ffff8888888f...
        ....f888888888fff.
        ...f888888888f22ff
        ..f2f888fff8f22fff
        ..f2ffff...f22ffff
        ..f2f222f..f2ffff.
        ...f22222f..ffff..
        ....ffffff...ff...
        `, SpriteKind.Player)
    controller.moveSprite(Mario, 100, 0)
    tiles.placeOnRandomTile(Mario, assets.tile`tile9`)
    for (let value of tiles.getTilesByType(assets.tile`tile9`)) {
        tiles.setTileAt(value, assets.tile`transparency16`)
    }
    Mario.ay = 350
    scene.cameraFollowSprite(Mario)
    info.setLife(5)
    for (let value2 of tiles.getTilesByType(assets.tile`tile7`)) {
        coin2 = sprites.create(img`
            . . . . . . f f f f . . . . . . 
            . . . . f f 1 1 1 1 f f . . . . 
            . . . f 1 1 5 5 5 5 5 5 f . . . 
            . . . f 1 5 5 5 5 5 5 5 f . . . 
            . . f 1 5 5 5 1 1 5 5 5 5 f . . 
            . . f 1 5 5 1 5 5 f 5 5 5 f . . 
            . . f 1 5 5 1 5 5 f 5 5 5 f . . 
            . . f 1 5 5 1 5 5 f 5 5 5 f . . 
            . . f 1 5 5 1 5 5 f 5 5 5 f . . 
            . . f 1 5 5 1 5 5 f 5 5 5 f . . 
            . . f 1 5 5 1 5 5 f 5 5 5 f . . 
            . . f 1 5 5 1 5 5 f 5 5 5 f . . 
            . . . f 5 5 5 f f 5 5 5 f . . . 
            . . . f 5 5 5 5 5 5 5 5 f . . . 
            . . . . f f 5 5 5 5 f f . . . . 
            . . . . . . f f f f . . . . . . 
            `, SpriteKind.coin)
        tiles.placeOnTile(coin2, value2)
        tiles.setTileAt(value2, assets.tile`transparency16`)
    }
    for (let value3 of tiles.getTilesByType(assets.tile`tile8`)) {
        dead_gomba = sprites.create(img`
            . . . . . e e e e e e . . . . . 
            . . . . e e e e e e e e . . . . 
            . . . e e e e e e e e e e . . . 
            . . e f e e f e f e e f e e . . 
            . e e e f f e e e f f e e e e . 
            . e e e f f e e e f f e e e e . 
            e e e f e e f e f e e f e e e e 
            e e e e e e e e e e e e e e e e 
            e e e e e e e e e e e e e e e e 
            . e e e e d d d d d d e e e e . 
            . . . . d d d d d d d . . . . . 
            . . f f d d d d d d d . . . . . 
            . f f f f f d d d d d f f . . . 
            . f f f f f f d d d f f f . . . 
            . . f f f f f . . f f f . . . . 
            . . . . . . . . . . . . . . . . 
            `, SpriteKind.gomba)
        tiles.placeOnTile(dead_gomba, value3)
        tiles.setTileAt(value3, assets.tile`transparency16`)
        dead_gomba.vx = -20
        dead_gomba.setBounceOnWall(true)
    }
}
sprites.onOverlap(SpriteKind.Player, SpriteKind.Enemy, function (sprite, otherSprite) {
    otherSprite.destroy()
    if (Mario.y > otherSprite.y) {
        info.changeLifeBy(-1)
    } else {
        info.changeScoreBy(3)
    }
})
let dead_gomba: Sprite = null
let coin2: Sprite = null
let koopa: Sprite = null
let Mario: Sprite = null
GenerarMapa01()
game.onUpdate(function () {
    Mario.setImage(assets.image`mario01`)
    if (Mario.vy < 0) {
        Mario.setImage(assets.image`mario01`)
    } else {
    	
    }
    if (Mario.vx < 0) {
        Mario.setImage(assets.image`mario01`)
        Mario.image.flipX()
    }
})
