@namespace
class SpriteKind:
    coin = SpriteKind.create()
    gomba = SpriteKind.create()

def on_a_pressed():
    if Mario.vy == 0:
        Mario.vy = -190
controller.A.on_event(ControllerButtonEvent.PRESSED, on_a_pressed)

def on_overlap_tile(sprite, location):
    game.over(True)
scene.on_overlap_tile(SpriteKind.player,
    assets.tile("""
        tile5
    """),
    on_overlap_tile)

def on_overlap_tile2(sprite, location):
    game.over(False)
scene.on_overlap_tile(SpriteKind.player,
    sprites.dungeon.hazard_lava1,
    on_overlap_tile2)

def on_on_overlap(sprite, otherSprite):
    info.change_score_by(1)
    otherSprite.destroy()
sprites.on_overlap(SpriteKind.player, SpriteKind.coin, on_on_overlap)

def on_overlap_tile3(sprite, location):
    game.over(True)
scene.on_overlap_tile(SpriteKind.player,
    assets.tile("""
        tile6
    """),
    on_overlap_tile3)

def on_on_overlap2(sprite, otherSprite):
    global koopa
    otherSprite.destroy()
    koopa = sprites.create(img("""
            . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . .
        """),
        SpriteKind.enemy)
    animation.run_image_animation(koopa,
        [img("""
                . 5 7 1 1 . . . . . . . . . . . 
                        . 5 7 1 1 . . . . . . 1 . . . . 
                        . 5 1 1 1 . . . . . 1 1 1 . . . 
                        5 5 1 1 1 . . . . 1 1 4 1 . . . 
                        5 5 5 5 5 . . . 1 1 4 1 1 . . . 
                        5 7 5 5 5 . . 1 1 4 1 1 1 . . . 
                        5 5 5 5 5 . 1 1 1 1 1 1 1 . . . 
                        5 5 5 5 5 1 1 4 7 7 1 1 1 1 . . 
                        5 5 5 5 5 1 7 7 4 7 7 7 7 7 1 1 
                        5 5 5 5 5 1 1 7 7 4 7 7 7 7 7 1 
                        . . . . . . 1 1 7 7 4 7 7 7 7 1 
                        . . . . . . 5 1 1 7 7 4 7 7 7 1 
                        . . . . . . 5 5 1 1 7 7 4 7 7 1 
                        . . . . . . 5 5 5 1 1 1 1 7 1 1 
                        . . . . . . 5 5 5 . . . 1 1 1 5 
                        . . . . . 5 5 5 5 . . . 5 5 5 5
            """),
            img("""
                . 5 7 1 1 . . . . . . . . . . . 
                        . 5 7 1 1 . . . . . . . . . . . 
                        . 5 1 1 1 . . . . . . . . . . . 
                        5 5 1 1 1 . . . . . . . . . . . 
                        5 5 5 5 5 . . . . . . . . . . . 
                        5 7 5 5 5 . . . . . . . . . . . 
                        5 5 5 5 5 . 1 1 1 1 1 1 1 . . . 
                        5 5 5 5 5 1 1 4 7 7 1 1 1 1 . . 
                        5 5 5 5 5 1 7 7 4 7 7 7 7 7 1 1 
                        5 5 5 5 5 1 1 7 7 4 7 7 7 7 7 1 
                        . . . . . . 1 1 7 7 4 7 7 7 7 1 
                        . . . . . . 5 1 1 7 7 4 7 7 7 1 
                        . . . . . . 5 5 1 1 7 7 4 7 7 1 
                        . . . . . . 5 5 5 1 1 1 1 7 1 1 
                        . . . . . . 5 5 5 . . . 1 1 1 5 
                        . . . . . 5 5 5 5 . . . 5 5 5 5
            """)],
        100,
        True)
    koopa.set_position(Mario.x + 80, Mario.y - 80)
    koopa.follow(Mario, 100)
    if Mario.y == otherSprite.y:
        info.change_life_by(-1)
    else:
        info.change_score_by(3)
sprites.on_overlap(SpriteKind.player, SpriteKind.gomba, on_on_overlap2)

def GenerarMapa01():
    global Mario, coin2, dead_gomba
    scene.set_background_color(9)
    scene.set_background_image(img("""
        ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ..................................ffffff..................................fffff.................................................................................
                ................................ff11111ffffff...........................fff111ff................................................................................
                ................................f111111111111f..........................f111111f................................................................................
                ........................ff....ff11111111111111f........................f1111111ff...............................................................................
                .......................ff1ff.f1111111111111111f........................f11111111f...fffffffffffff...............................................................
                ......................f1111f.f11111111111111111f......................ff11111111ffff111111111111ff..............................................................
                .....................f111111f111111111111111111f......................f11111111111111111111111111f..............................................................
                ...................fff1111111111111111111111111f......................f11111111111111111111111111f..............................................................
                ...................f.f1111111111111111111111111f......................f111111111111111111111111ff...............................................................
                ....................f111111111111111111111111fff.......................f1111111111111111111111f.................................................................
                ....................ff1111111111111111111111f..........................ff1111111111111111111ff..................................................................
                ......................f11111111111111111111f............................ff11111111111111ffff....................................................................
                ......................f1111111111111111111f..............................fffffffffffffff........................................................................
                .......................f111111111111111fff......................................................................................................................
                .......................ffffffffffffffff.........................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ................................................................................................................................................................
                ...............................777777...........................................................................................................................
                ...........................77777777777..........................................................................................................................
                ......................777777777777777777......................................777...............................................................................
                ......................77777777777777777777.........................777.......77777..............................................................................
                .....................777777777777777777777........................77777.....77777777......7777..................................................................
                ....................7777777777777777ff77777.......................7777777..77777777777.777777777................................................................
                ...................7777ff7777777777fff7777777....................777777777777777777777.7777777777...............................................................
                ...................7777ff7777777777fff77777777...................777777777777777777777777777777777..............................................................
                ..................77777777777777777fff77777777...................777777777777777777777777777777777..............................................................
                ................7777777777777777777777777777777..................7777777777777777777777777777777777.............................................................
                ................7777777777777777777777777777777..................7777777777777777777777777777777777.............................................................
    """))
    Mario = sprites.create(img("""
            ........ffff......
                    ......ff222ff.....
                    .....f222222f.....
                    ....f222ffffff....
                    ...f222ffffffff...
                    ...f2ffddddddff...
                    ..ffffdddfdfdf....
                    ..fdffdddfdfdf....
                    .fddfffdddddddf...
                    .fdddfddfdddddf...
                    ..fddddffffddfff..
                    ...ffddddfffff....
                    ....fffdddddf.....
                    ....ffffffff......
                    ..ff22f82228f.....
                    .f2222f82228f.....
                    f2222f8882228ff...
                    f222f888822288df..
                    f22ffff8888888df..
                    f2fddddf858855....
                    .ffddddf858855f...
                    ...ffff8888888f...
                    ....f888888888fff.
                    ...f888888888f22ff
                    ..f2f888fff8f22fff
                    ..f2ffff...f22ffff
                    ..f2f222f..f2ffff.
                    ...f22222f..ffff..
                    ....ffffff...ff...
        """),
        SpriteKind.player)
    controller.move_sprite(Mario, 100, 0)
    tiles.set_tilemap(tilemap("""
        level1
    """))
    tiles.place_on_random_tile(Mario, assets.tile("""
        tile9
    """))
    for value in tiles.get_tiles_by_type(assets.tile("""
        tile9
    """)):
        tiles.set_tile_at(value, assets.tile("""
            transparency16
        """))
    Mario.ay = 350
    scene.camera_follow_sprite(Mario)
    info.set_life(5)
    for value2 in tiles.get_tiles_by_type(assets.tile("""
        tile7
    """)):
        coin2 = sprites.create(img("""
                . . . . . . f f f f . . . . . . 
                            . . . . f f 1 1 1 1 f f . . . . 
                            . . . f 1 1 5 5 5 5 5 5 f . . . 
                            . . . f 1 5 5 5 5 5 5 5 f . . . 
                            . . f 1 5 5 5 1 1 5 5 5 5 f . . 
                            . . f 1 5 5 1 5 5 f 5 5 5 f . . 
                            . . f 1 5 5 1 5 5 f 5 5 5 f . . 
                            . . f 1 5 5 1 5 5 f 5 5 5 f . . 
                            . . f 1 5 5 1 5 5 f 5 5 5 f . . 
                            . . f 1 5 5 1 5 5 f 5 5 5 f . . 
                            . . f 1 5 5 1 5 5 f 5 5 5 f . . 
                            . . f 1 5 5 1 5 5 f 5 5 5 f . . 
                            . . . f 5 5 5 f f 5 5 5 f . . . 
                            . . . f 5 5 5 5 5 5 5 5 f . . . 
                            . . . . f f 5 5 5 5 f f . . . . 
                            . . . . . . f f f f . . . . . .
            """),
            SpriteKind.coin)
        tiles.place_on_tile(coin2, value2)
        tiles.set_tile_at(value2, assets.tile("""
            transparency16
        """))
    for value3 in tiles.get_tiles_by_type(assets.tile("""
        tile8
    """)):
        dead_gomba = sprites.create(img("""
                . . . . . e e e e e e . . . . . 
                            . . . . e e e e e e e e . . . . 
                            . . . e e e e e e e e e e . . . 
                            . . e f e e f e f e e f e e . . 
                            . e e e f f e e e f f e e e e . 
                            . e e e f f e e e f f e e e e . 
                            e e e f e e f e f e e f e e e e 
                            e e e e e e e e e e e e e e e e 
                            e e e e e e e e e e e e e e e e 
                            . e e e e d d d d d d e e e e . 
                            . . . . d d d d d d d . . . . . 
                            . . f f d d d d d d d . . . . . 
                            . f f f f f d d d d d f f . . . 
                            . f f f f f f d d d f f f . . . 
                            . . f f f f f . . f f f . . . . 
                            . . . . . . . . . . . . . . . .
            """),
            SpriteKind.gomba)
        tiles.place_on_tile(dead_gomba, value3)
        tiles.set_tile_at(value3, assets.tile("""
            transparency16
        """))
        dead_gomba.vx = -20
        dead_gomba.set_bounce_on_wall(True)

def on_on_overlap3(sprite, otherSprite):
    otherSprite.destroy()
    if Mario.y > otherSprite.y:
        info.change_life_by(-1)
    else:
        info.change_score_by(3)
sprites.on_overlap(SpriteKind.player, SpriteKind.enemy, on_on_overlap3)

dead_gomba: Sprite = None
coin2: Sprite = None
koopa: Sprite = None
Mario: Sprite = None
GenerarMapa01()

def on_on_update():
    Mario.set_image(assets.image("""
        mario01
    """))
    if Mario.vy < 0:
        Mario.set_image(assets.image("""
            mario01
        """))
    else:
        pass
    if Mario.vx < 0:
        Mario.set_image(assets.image("""
            mario01
        """))
        Mario.image.flip_x()
game.on_update(on_on_update)
